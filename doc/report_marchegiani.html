<!-- Progetto ALLL -->

<!doctype html>
<html>
	<head>
		<title>Gotham - FCG Report</title>
		<style>
			h1 {
				color: rgb(232, 229, 229);
				font-size: 50px;
			}
			h1, h2, h3 {
				color: rgb(4, 12, 59);
				position: relative;
				text-align: center;
			}
			p, ul, li {
				margin-left: 20px;
				margin-right: 20px;
				font-size: 20px;
			}
			body {
				font-family: 'Geneva', 'Helvetica', 'Arial', sans-serif;
				background-color: rgba(41, 54, 118, 0.42);
				max-width: 100%;
				overflow-x: hidden;
			}
			div {
				width:100%;
			}
			.centered{
				justify-content: center;
				display: flex;
			}
			.section {
				border: 1px solid black;
				border-radius: 10px;
				display: table;
				align-items: center;
				margin: auto;
				background-color: rgba(226, 230, 246, 0.42);
			}
			.hs {
				background-color: rgba(41, 54, 118, 0.38);
			}
			.hs2 {
				background-color: rgba(76, 118, 41, 0.38);
			}
			img {
				margin: 5px;
			}
			ks{
				font-family: "Arial";
				font-weight: bold;
				color: #0000CD	;
				font-size: 90%;
			}
			em{
				font-family: "Arial";
				font-size: 80%;
				font-weight: bold;
				border-style:solid;
				border-color: #abe876;
				color: #1632cc;
			}
			kc{
				font-family: "Arial";
				font-weight: bold;
				color: #008000	;
				font-size: 90%;
			}
			pre{
				font-family: "Consolas";
				font-size: 85%;
				background-color: #f5f5f5;
				border: 1.5px solid silver;
				padding: 5px;
			}
			m{
				font-family: "Helvetica";
				line-height: 100%;
				font-size: 75%;
			}
			k{
				color: #990000;
				font-weight: bold;
				font-size: 90%;
			}
			a, a:visited, a:hover, a:active {
				color: inherit;
			}
		</style>

	</head>
	
	<body>
		<h1>Gotham Project</h1>
		<h2>Final Project - Fundamentals of Computer Graphics</h2>
		<h3>By Luca De Marchegiani</h3>
		<h3>Computer Science Engineering - Master Degree</h3>
		
		<div class="centered">
			<img src="images\Blender\immagine7.png" height="600" >
		</div>

		<h2 style="text-align: left;padding-left: 50px">Index</h2>
		<ol>
			<li><a href="#introduction">Introduction and Context</a></li>
			<li><a href="#ambient_scene">Ambient and Scene</a></li>
			<li><a href="#lights">Lights and Shadows</a></li>
			<li><a href="#movable_objects">Movable Objects</a></li>
			<li><a href="#user_interaction">User Interaction</a></li>
			<li><a href="#fast_project_overwiev">Fast Application Project Overview</a>
				<ul>
					<li><a href="#typescript_use">The use of Typescript</a></li>
					<li><a href="#entities">The main entities of the application</a></li>
					<li><a href="#decorators_and_main">Decorators and Main Class</a></li>
					<li><a href="#signals">Signals</a> </li>
				</ul>
			</li>
		</ol>
		
		<br>
		<h2 class="hs" id="introduction">Introduction and Context</h2>
		<div class="section">
			<p>
				Gotham city is one of the fictional cities of the DC Comics Universe and has always been one of the most wished destinations of the lovers of <i>Batman</i>, the famous super-hero who saved the world lots of times!<br>
				The aim of this <i>simple</i> application is to realize the dream of who wishes to visit and explore this city, being in the shoes of the amazing super-hero Batman.<br><br>
			</p>
			<p style="text-align: center"><b>Who does not wish to be Batman driving the BatMoto through the street of Gotham!?</b></p>
			<p>
				<!--TESTO-->
			</p>
		</div>
		<br>
		<br>
		<h2 class="hs" id="ambient_scene">Ambient and Scene</h2>
		<div class="section">
			<div class="centered">
				<table>
					<tr>
						<th><img src="images\Blender\immagine.png" height="200" ></th>
						<th><img src="images\Blender\immagine2.png" height="200" ></th>
					</tr>
					<tr>
						<th><img src="images\Blender\immagine3.png" height="200" ></th>
						<th><img src="images\Blender\immagine4.png" height="200" ></th>
					</tr>
				</table>
			</div>

			<p>
				The representation of Gotham has been developed as an <ks>oval circuit</ks> textured with the roadways and the colored buildings with a <i>glass effect</i> to evidence the gloomy colors of Gotham.<br>
				In addition, lots of objects have been added inside the scene:
			</p>
			<ul>
				<li>a <kc>huge logo</kc> of Batman that has also been painted;</li>
				<li>the personalized <kc>BatSignaler</kc> on the top of the smaller building;</li>
				<li><kc>streetlights</kc> near the road;</li>
				<li>a small <kc>garden</kc> with a three.</li>
			</ul>
			<p>
				To conclude this fast overview, the scene has also <kc>the picture of the <i>creator</i></kc> on the face of the small building, as shown in the picture above.
			</p>
		</div>
		<br>
		<br>
		<h2>Lights and Shadows</h2>
		<div class="section" id="lights">
			<div class="centered">
				<table>
					<tr>
						<th><img src="images\shadows.jpg" height="300" ></th>
						<th><img src="images\shadows_2.jpg" height="300" ></th>
					</tr>
				</table>
			</div>
			<p>
				To realize the part of the <k>lights</k> and <k>shadows</k>, it has been directly used <i>WebGL</i> by putting a <kc>directional ambient light</kc> inside the world in order to simulate the one of a sun. Thanks to the <i>right</i> menu, it is possible to configure the position, the target, the size and also other parameters of the light.<br>
				The scene is automatically updated each time the user set one of the available option, but this mechanism will be clarified soon.
			</p>

		</div>

		<br>
		<br>
		<h2 class="hs" id="movable_objects">Movable objects</h2>
		<div class="section">
			<div class="centered">
				<table>
					<tr>
						<th><img src="images\Blender\immagine5.png" height="300"></th>
						<th><img src="images\Blender\immagine6.png" height="300" ></th>
					</tr>
				</table>
			</div>

			<p>
				The main object of the scene is <kc>Batman</kc> on his <ks>BatMoto</ks> that has been realized using <i>Blender</i> and manipulating multiple <var>obj</var>s items that have been loaded and managed.
				Every object has been colored using a dark style like and <i>Batman</i> has been adapted to assume the position of who is driving a motorbike.<br><br>

				Actually, all the original objects that compose <i>Batmain</i> have been bundled into one <var>obj</var> that is atomically used and managed from the application, but in future developments it will be possible to handle them separately: this will let to move the wheel like in real life. In addition, it will be possible and reasonable to develop a mechanism of collisions handling with the other objects of the scene.<br>
				The actual version of the application only use a <k>trivial position-constrained system</k> that constrains the main subject to stay inside the world without going out of a fixed parallelepiped.<br><br>
				Then, we have <ks>two <code>obj</code>s</ks> that are currently loaded by the application: one for <i>Batman</i> and the other for the world.<br><br>

				To conclude, in the future it will be appropriated to add the <i>physics of the movements</i> that is currently missed (the object simply move thanks to the interaction with the user, following some trivial events that allows only to move back and forward and to rotate).<br><br>

				<em>Following the normal logic of the application, <i>Batman</i> is the only object that can be moved using the interactions, but it is also possible to move the world (and also other objects that can be added) using the menu, until this functionality remains enabled.</em>
			</p>
		</div>

		<br>
		<br>
		<h2 class="hs" id="user_interaction">User Interaction</h2>
		<div class="section">
			<p>
				The user can interact with the application both on <kc>desktop</kc> and <kc>mobile</kc> by using:
			</p>
			<ul>
				<li>the <k>keyboard</k> with the directional arrows;</li>
				<li>the <k>mouse</k>;</li>
				<li>the <k>touchscreen</k> (for mobile).</li>
			</ul>
			<h3>Desktop Version</h3>
			<div class="centered">
				<img src="images\desktop_version.jpg" height="400" >
			</div>
			<br>
			<h3>Mobile Version</h3>
			<div class="centered">
				<table>
					<tr>
						<th><img src="images\mobile_version_1.jpg" height="400" ></th>
						<th><img src="images\mobile_version_2.jpg" height="400" ></th>
					</tr>
				</table>
			</div>
			<p>
				The user can move the motorbike by using the following <em>keys</em>:
			</p>
			<ul>
				<li><k>&#x2191;</k>: move forward</li>
				<li><k>&#x2193;</k>: move backward</li>
				<li><k>&#x2190;</k>: turn left</li>
				<li><k>&#x2192;</k>: turn right</li>
			</ul>
			<p>
				Instead, he can also use the mouse:
			</p>
			<ul>
				<li><k>clicking and moving up</k> to move forward</li>
				<li><k>clicking and moving down</k> to move backward</li>
				<li><k>clicking and moving right</k> to turn left</li>
				<li><k>clicking and moving left</k> to turn right</li>
			</ul>
			<p>
				For the mobile version, the controls are the same of the mouse but with the touch instead of the click.
				By summarising, the motorbike can be moved:
			</p>
			<div class="centered">
				<table style="border: 1px solid black">
					<tr>
						<th></th>
						<th style="padding: 10px"><k>KEYBOARD</k></th>
						<th style="padding: 10px"><k>MOUSE</k></th>
						<th style="padding: 10px"><k>TOUCH</k></th>
					</tr>
					<tr>
						<th style="padding: 5px"><ks>MOVE FORWARD</ks></th>
						<th style="padding: 5px">Press &#x2191;</th>
						<th style="padding: 5px">Click and move UP</th>
						<th style="padding: 5px">Touch and move UP</th>
					</tr>
					<tr>
						<th style="padding: 5px"><ks>MOVE BACKWARD</ks></th>
						<th style="padding: 5px">Press &#x2193;</th>
						<th style="padding: 5px">Click and move DOWN</th>
						<th style="padding: 5px">Touch and move DOWN</th>
					</tr>
					<tr>
						<th style="padding: 5px"><ks>TURN LEFT</ks></th>
						<th style="padding: 5px">Press &#x2190;</th>
						<th style="padding: 5px">Click and move RIGHT</th>
						<th style="padding: 5px">Touch and move RIGHT</th>
					</tr>
					<tr>
						<th style="padding: 5px"><ks>TURN RIGHT</ks></th>
						<th style="padding: 5px">Press &#x2192;</th>
						<th style="padding: 5px">Click and move LEFT</th>
						<th style="padding: 5px">Touch and move LEFT</th>
					</tr>
				</table>
			</div>


			<p>
				In addition to the controls with mouse, keyboard and touchscreen, the application is also provided with a rich <ks>menu</ks> that works perfectly about the settings, but that has some problems of <i>style</i>.
				Even if there are some styling details that have to be improved, the menu works perfectly, allowing the user to manipulate lots of parameters of the <i>camera</i>, the <i>lights and the shadows</i> and the <i>objects</i> that are present into the scene.<br><br>

				<em>To have the entire vision of the menu, please set the entire screen and use the zoom to make all the options visible.</em>
				The scroll bar is currently not working due to the fact that there is a small interference through some mouse events and something that has to be fixed in the <i>css</i>.

			</p>

			<div class="centered">
				<table>
					<tr>
						<th><img src="images/menu_1.jpg" width="400"></th>
						<th><img src="images/menu_2.jpg" width="400"></th>
					</tr>
				</table>
			</div>

			<p>The menu is composed by multiple <i>parts</i> that offer lots of functionality to the user :</p>
			<ul>
				<li><b>the <em>LOG</em> option</b> that allow the user to see the log of the application into the console</li>
				<li>
					<b>the <em>camera</em> section</b> that is composed by:
					<ul>
						<li>the <ks>target</ks> object that is targeted by the camera when <i>cameraman</i> or <i>look_at</i> or <i>follow</i></li> are set
						<li><ks><i>look_at</i></ks> the option that forces the camera to watch the target object; this option can not be activated if <i>cameraman</i> is not in <var>DISMISSED</var> mode</li>
						<li><ks><i>follow</i></ks> the option that forces the camera to follow the translations of the target object (but not the rotation); this option automatically activates <i>look_at</i> and can not be activated if <i>cameraman</i> is not in <var>DISMISSED</var> mode</li>
						<li><ks><i>cameraman</i></ks> set the mode in which the camera man has to position the camera on the scene to make the user watching the scene</li>
						<li><ks><i>cam_high</i></ks> and <ks><i>cam_distance</i></ks> to set the high of the camera and the distance it must have from the object when the cameraman is working</li>
						<li><ks><i>cameraX</i></ks>, <ks><i>cameraY</i></ks> and <ks><i>cameraZ</i></ks> that allow to set the position of the camera</li>
						<li><ks><i>cameraUpX</i></ks>, <ks><i>cameraUpY</i></ks> and <ks><i>cameraUpZ</i></ks> that allow to set the UP vector of the camera</li>
						<li><ks><i>zNear</i></ks> and <ks><i>zFar</i></ks> for the relative parameter</li>
						<li><ks><i>fov</i></ks> for the field of view</li>
						<li><ks><i>targetX</i></ks>, <ks><i>targetY</i></ks> and <ks><i>targetZ</i></ks> dedicated to the point targeted by the camera</li>
					</ul>
				</li>
				<li><b>the <em>light</em></b> section that is composed by:
					<ul>
						<li><ks><i>shadows</i></ks> and <ks><i>frustum</i></ks> to activate and deactivate the <i>shadows</i> and the <i>frustum</i></li>
						<li><ks><i>lightPosX</i></ks>, <ks><i>lightPosY</i></ks> and <ks><i>lightPosZ</i></ks>  to set the position of the source of the light</li>
						<li><ks><i>lightTargX</i></ks>, <ks><i>lightTargY</i></ks> and <ks><i>lightTargZ</i></ks>  to set the target the light has to point</li>
						<li><ks><i>lightFov</i></ks> for the field of view of the light when in <i>spotlight</i> mode</li>
						<li><ks><i>lightNear</i></ks> and <ks><i>lightFar</i></ks> for the relative parameter of the light</li>
						<li><ks><i>spotlight</i></ks> to activate or de-activate the spotlight of the light<i></i></li>
					</ul>
				</li>
				<li>
					<b>the <em>objects</em> section</b> that is composed by:
					<ul>
						<li>the <ks>currentobj</ks> that is the object that will be affected by the following options of the menu
						<li><ks><i>hidden</i></ks> to hide the <var>currentobj</var></li>
						<li><ks><i>posX</i></ks>, <ks><i>posY</i></ks> and <ks><i>posZ</i></ks> to change the position of the <var>currentobj</var></li>
						<li><ks><i>scaleX</i></ks>, <ks><i>scaleY</i></ks> and <ks><i>scaleZ</i></ks> that let to modify scale the <var>currentobj</var></li>
						<li><ks><i>psi</i></ks>, <ks><i>delta</i></ks> and <ks><i>phi</i></ks> to rotate the object respectively around the <i>x-axis</i>, <i>y-axis</i>, <i>z-axis</i></li>
					</ul>
				<li><b>the <em>draw</em></b> <i>renders</i> the scene manually</li>
			</ul>

			<p>
				To conclude the user interaction, it's also important to say that the application has been provided with lots of <var>log prints</var> that can be inspected using the developer tools.
				As already said, the log can be disabled using the proper button on the menu.
			</p>
		</div>

	<h2 class="hs" id="fast_project_overwiev">Fast Application Prject Overview</h2>
	<div class="section">
		<p>
			We discussed the functionality this application offers to the user, but since this is a course of the degree of <i>Computer Science Engineering</i>, it's also important to give some details about the model and the implementation of the software.
		</p>

		<h2 class="hs2" id="typescript_use">The use of typescript</h2>
		<p>
			The first important decision that has been taken is to adopt <a href="https://www.typescriptlang.org/"><em>Typescript</em></a> instead of Javascript.
			Typescript is a <i>super-set</i> of Javascript: every program written in Javascript continue to work perfectly also in Typescript. Indeed <k>each Typescript application is compiled into Javascript</k> files.<br><br>
			So, the reason why it has been used in this application is:
		</p>
		<ul>
			<li>it adds the support for the <kc>types</kc></li>
			<li>it makes easy to use the classical <i>object oriented programming</i></li>
			<li>it allows to <kc>have a better organization the code</kc>, dividing it into multiple entities with a simple namespace</li>
			<li>it is perfectly <kc>compatible with Javascript</kc>, as already said</li>
		</ul>
		<p>
			All the code developed in this application can be found at: <em><a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani">https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani</a></em>
			Typescript allows the developer to define <i>classes</i> inside <var>.ts</var> files: it is possible to create a new Typescript file with a class and to use it into an another <ver>.ts</ver> file using the simple <var>import</var> system.<br>
			You can find all the Typescript code organized into classes at <em><a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani/project/src/ts">https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani/project/src/ts</a></em><br><br>

			So, it is possible to define multiple classes inside multiple files, but to use it inside an <var>html</var> page for a web application it is needed to create a <kc>bundle</kc>: in order to do this it is possible to use <a href="https://webpack.js.org/"><em>webpack</em></a>, a <i>node</i> tool that easily let to create a <i>bundled</i> <var>.js</var> file starting from multiple Typescript files (but it also let to do some other great things that are out of the aims of this project).<br><br>

			By summarizing, thanks to Typescript, it has been possible to develop the application thinking about entities in the <i>object oriented</i> world that have been bundled into a single <var>.js</var> file that is used from the <var>html</var> main page of the application.
			As said, the Typescript code is compiled into Javascript thanks to the compiler: to do this, the compiler must use a configuration file called <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/tsconfig.json"><em>tsconfig.json</em></a> with all the options and the settings of the project and the Typescript files to be included.<br><br>

			About the produced bundle, webpack also requires a configuration file that is called <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/webpack.config.js"><em>webpack.config.js</em></a>; an important voice of this file is the <ks>entry</ks> setting that tells to webpack which is the Typescript file that contains the <i>main</i> code the bundle have to run.
			It is possible to find both of this file in the main directory of the project (<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani/project"><var>/project/</var></a>).<br><br>

			Then, in the <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani/project/src/ts">/project/src/ts</a> it is possible to find all the packages and the classes that have been developed and that are used into the <i>main file</i> <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/LucaMarchegianiApp.ts"><em>LucaMarchegianiApp.ts</em></a>, that is the entry that will be passed to webpack. In order to compile, it is needed to have <i>node</i>, <i>Typescript</i> and <i>webpack</i> installed, then to open a terminal inside the <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani/project"><var>/project/</var></a> directory and run:
		</p>
		<p style="text-align: center">
			<code> npx webpack --config webpack.config.js --mode development</code>
		</p>
		<p>
			The mode parameter lets to specify the purpose of the produced <var>.js</var>:
		</p>
		<ul>
			<li><ks>development</ks>, that produces a <i>developer-readable</i> <i>.js</i> file that can be easily debugged</li>
			<li><ks>production</ks>, that produces a compact <i>.js</i> that is used in the production phase (it is difficult to be debugged)</li>
		</ul>
		<p>
			You can see the produced bundle for this application in the development mode: <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/dist/bundle.js"><em>bundle.js</em></a>.
			<br><br>
			Said that, it is possible to give some details about the development of the application that will be eventually clarified during the oral examination.
		</p>

		<h2 class="hs2" id="entities">The main entities of the application</h2>
		<p>The following diagram illustrate the main entities of the application:</p>
		<div class="centered">
			<img src="images\entities_uml.png" height="400" >
		</div>
		<ul>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/obj/mesh-object.ts"><em>MeshObject</em></a><br>
				The interface that declare a <i>mesh</i> object that can be loaded and then can <i>geometrically</i> manipulated thanks to its main useful methods <code>setPosition()</code>, <code>setPolarRotation()</code> and <code>setScale()</code>; the class that implements this interface must also store the data about position, rotation and scale of the object.<br>
				Actually, this interface also contains the <code>draw()</code> method that will be used to draw and render the object into <i>WebGL</i>.<br><br>
			</li>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/obj/mesh-object-manager.ts"><em>MeshObjectManager</em></a><br>
				A class that defines an object that is able to load mesh objects and to maintain their references in order to make them accessible to the application.
				The main methods of this class are <code>loadObj()</code> and <code>get()</code>.<br><br>
			</li>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/camera/camera.ts"><em>Camera</em></a><br>
				An interface that defines a component that is able to realize the concept of <i>camera</i> as an entity that allow the use to take a watch into the virtual internal world.
				This interface forces the class that implements it to implement very useful method like <code>setPosition()</code>, <code>setUp()</code>, <code>setTarget()</code>, <code>setFov()</code>, <code>setZNear()</code> or <code>setZFar()</code>.<br><br>
			</li>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/camera/camera-man.ts"><em>CameraMan</em></a><br>
				A class that that is able to manage a <i>camera</i> like a professional camera man. It allows to block the camera in some predefined visual mode like <i>OVER</i>, <i>FIRST_PERSON</i> <i>THIRD_PERSON</i> that are actually supported (to keep the camera over a target, to watch like the target or to watch the target from behind)<br>
				The main methods of this class are <code>hire()</code>, <code>setTarget()</code>, <code>setHigh()</code> and <code>setDistance()</code>.<br><br>
			</li>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/obj/sl-manager.ts"><em>SlManager</em></a><br>
				A component that is able to manage shadows and lights. It exposes some useful methods like <code>setLightPosition()</code>, <code>setLightUp()</code>, <code>setLightTarget()</code>, <code>setLightFov()</code>, <code>setNear()</code>, <code>setFar()</code> or <code>setShadows()</code>.<br><br>
			</li>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/obj/mesh-object-drawer.ts"><em>MeshObjectDrawer</em></a><br>
				That component that realizes the <i>draw</i> and the <i>render</i> operation in <i>WebGL</i> using the <var>MeshObjectManager</var> to draw each single object.<br>
				So, it uses one <code>MeshObjectManager</code>, one <code>Camera</code>, one <code>CameraManager</code> and one <code>SlManager</code> to realize the draw and the rendering process in <i>WebGL</i>.<br>
				The main method of this component is <code>renderScene()</code>.<br><br>
			</li>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/webgl/webgl-environment.ts"><em>WebGLEnvironment</em></a><br>
				The class that simply creates and maintains the <i>WebGL</i> environment intended as all the components that are <i>WebGL</i> built-in to let the other entities to work. In particular, it keeps the <code>ProgramInfo</code>, the <code>WebGLRenderingContext</code> and the <code>HTMLCanvasElement</code>.
				<br><br>
			</li>
			<li>
				<a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/webgl/webgl-application.ts"><em>WebGLApplication</em></a><br>
				The focus of the application, the abstract class that <ks>lets the developer to define his own application</ks> that refers to a canvas into the <i>HTML</i>.
				The main method of this class is the <code>main()</code> that can be overridden with the custom logic of the entire application.
				This class works with the <em><code>@WebGL</code></em> decorator that will be explained soon and that <k>has to be called into the <i>entry</i> file of the bundle <var>js</var></k>.
				<br><br>
			</li>
		</ul>
		<p>
			These components cooperate between us, with the <code>WebGLApplication</code> that is the main class that is used as the <i>entry-point</i> from the developer.
			<ks>Now should start to be clear that this is not a simple web application, but is a kind of framework to easily use <i>WebGL</i></ks>.
		</p>

		<h2 class="hs2" id="decorators_and_main">Decorators and Main Class</h2>
		<p>
			Thanks to the decorators, the framework behind the application lets the developer define the behaviour of the application using a more <kc>descriptive</kc> way instead of the huge amount of code I was forced to use in order to deal with <i>WebGL</i>.<br><br>

			For this reason, it was a good decision to use <a href="https://www.typescriptlang.org/docs/handbook/decorators.html"><em>decorators</em></a> that allow to use an <i>annotative</i> syntax to define the characteristic that are needed to use the <a href="https://it.wikipedia.org/wiki/Dependency_injection"><i>dependency injection</i></a> .<br>
			Looking at the main class of the application at <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/LucaMarchegianiApp.ts"><em>https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/LucaMarchegianiApp.ts</em></a>, it is slightly immediate to understand what this mean and what are the advantages.<br><br>

			Indeed, defined the <i>shader programs</i> into the <i>html</i> and the described functionality the framework should provide, the only think that remains is to define the objects into the scene and the behaviour they might have. Then, to define the main over this framework it is possible to use:
		</p>
<pre>
<k>const</k> SHADERS: <kc>WebGLShaderReference</kc> = {
	<ks>main</ks>: ["vertex-shader", "fragment-shader"],
	<ks>color</ks>:["color-vertex-shader", "color-fragment-shader"]
}

<ks>@WebGL("app-name", "canvas_id", SHADERS)</ks>
<k>class</k> MyApplication extends <kc>WebGLApplication</kc>{

	<ks>@WebGLMesh("path_to_the_obj")</ks>
	<ks>@ObjPosition(170,-131,1)</ks>
	<ks>@ObjRotation(degree(10),degree(20),degree(30))</ks>
	<ks>@ObjScale(0.3,0.3,0.3)</ks>
	#myObj: <kc>MeshObj</kc>

	<ks>@OnCanvasMouseEvent("mousedown")</ks>
	<ks>@OnCanvasTouchEvent("touchstart")</ks>
	<k>protected</k> onMouseDown(e: MouseEvent|TouchEvent) {
		Log.log("WebGLApplication | capturing mouse down [event type: " + e.type + "]")
        //...
	}

	<ks>@OnKeyboardEvent("keydown")</ks>
	<k>protected</k> onKeyDown(e: KeyboardEvent) {
		Log.log("WebGLApplication | capturing key down [event type: " + e.type +
			", key: " + e.key + "]")
		//...
	}

	<k>protected</k> main(args: string[]): void {
		console.log("Hello world! [" + this.applicationName + "]")
		myObj.setPosition(0, -1, 100)
		this.getMeshObjectDrawer().getCamera().setPosition(1, 1, 1)
		this.getMeshObjectDrawer().getSlManager().setLightPosition(90, 500, 10)
		this.renderScene()
	}
}
</pre>
		<p>We have:</p>
		<ul>
			<li><em>@WebGL</em>:<br>
				The decorator that allow to annotate an application that owns a <code>WebGLEnvironment</code> canvas, a <code>MeshObjectDrawer</code> and a <code>MeshObjectManager</code>, allowing the developer to use the main with all of these object that are already <i>injected</i> and ready to use.
			</li>
			<li><em>@WebGLMesh</em>:<br>
				The decorator that allow to annotate the property of the class in which will be loaded and stored a specific <code>MeshObject</code> that will be ready to use at the <code>main()</code> execution time.
			</li>
			<li><em>@OnCanvasMouseEvent("mousedown")</em>, <em>@OnCanvasTouchEvent("mousedown")</em>, <em>@OnKeyboardEvent("mousedown")</em>:<br>
				The decorators that allow to annotate the methods that will be called once the specified event is fired (for the mouse, the touch and the keyboard).
			</li>
		</ul>
		<p>The other decorators easily allow the developer to set up an object once it has been loaded, fixing the position, the rotation or the scale.
			The full documentation at <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/webgl/webgl-application.ts"><em>https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/webgl/webgl-application.ts</em></a> will explain everything.<br><br>
			To conclude, in order to <ks>develop an application using the framework</ks>, the only thing that is needed is to extend the <code>WebGLApplication</code> class, annotating it with the <ks>@WebGL</ks> decorator and implementing the <code>main()</code>. Then this <var>.ts</var> file will be the entry of <i>webpack</i> that will bundle the file with the other dependencies into the final <i>.js</i>.
		</p>

		<h2 class="hs2" id="signals">Signals</h2>
		<p>
			In order to introduce a remarked level of <ks>decoupling</ks> between components, it has been developed a small and simple framework that allows to easily use the <a href="https://en.wikipedia.org/wiki/Event-driven_programming"><em>event-driven programming</em></a><br><br>

			The basic idea is:
		</p>
		<ul>
			<li>to have <i>components</i> or <i>entities</i> that <kc>fire</kc> events (we will call them <em>signals</em> to not be confused with the Javascript events) as the information emitted by a <ks>source</ks> with some <ks>data</ks> and that can produce a certain <ks>result</ks> when handled</li>
			<li>to have <i>components</i> or <i>entities</i> that <kc>handle</kc> the signals that are emitted</li>
			<li>a system that manages the <kc>subscriptions</kc> between the emitters and the handler components (in a decoupled way)</li>
		</ul>
		<p>
			It is easy to look at the advantages of integrating a system like the one that has been introduced, and the framework for <i>WebGL</i> that has just been described. Suppose to have an object that changes its position for some reasons, and the output of the GUI that has to show its position; or, again, also about the positioning of the camera. Indeed, if an object that has been moved <ks>triggers an event</ks>, than another component that is interested (for example the camera that as to follow the object) can receive it and behave based on the signal, also without having the reference to the object, but only the information about which is the target.<br><br>

			As anticipated, the framework behind the application has an own event driven infrastructure that is used from the various components.<br>
			All the code about the signal framework can be found here: <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani/project/src/ts/signals"><em>https://github.com/LM-96/Computer-Graphics-Project-ALLL/tree/main-LucaMarchegiani/project/src/ts/signals</em></a>.<br><br>

			Without going into the details (for now), it is easy to summarize the key point with the integration in the application:
		</p>
		<ul>
			<li>
				the system has a global point of subscription and registration for the signals (the <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/signals/flow.ts"><em>SignalFlows</em></a> class)
			</li>
			<li>
				each signal is associated into a <k>name</k> that is the only information needed to subscribe into a signal flow
			</li>
			<li>
				<ks>each loaded <code>MeshObject</code> instance is automatically attached to signal system and fires a specific event</ks> when its position has been changed, or its position or the scale
			</li>
			<li>
				<ks>the camera fires also events</ks> when the position, the target or the fov are changed of when the following at object mechanism os the looking at object are enabled or disabled
			</li>
		</ul>

		<p>Now it is possible to link the main implementations of:</p>
		<ul>
			<li><em><code>MeshObject</code></em>: <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/obj/flowed-mesh-object.ts">https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/obj/flowed-mesh-object.ts</a> (<ks>FlowedMeshObject</ks>)</li>
			<li><em><code>Camera</code></em>: <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/camera/flowed-camera.ts">https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/camera/flowed-camera.ts</a> (<ks>FlowedCamera</ks>)</li>
		</ul>
		<p>
			It is also possible to see the big advantages of this mechanism by looking at the <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/camera/camera-man.ts"><em>CameraMan</em></a> class, that uses the events fired by the target to realize the view moving the camera.<br><br>

			Again, a more descriptive way to register to events and to attach listeners is possible thanks to the decorators developed at <a href="https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/signals/signals-decorator.ts"><em>https://github.com/LM-96/Computer-Graphics-Project-ALLL/blob/main-LucaMarchegiani/project/src/ts/signals/signals-decorator.ts</em></a><br><br>

			More details about all will be provided at the oral examination if wished by the teacher.
		</p>
	</div>

	<h2 class="hs">Acknowledgements</h2>
	<div class="section">
		<p>
			A really special thanks to my colleagues and friends that collaborate with me during this final project:
		</p>
		<ul>
			<li><ks>Luca Landolfi</ks></li>
			<li><ks>Luca De Risi</ks></li>
			<li><ks>Antonio Franzese</ks></li>
		</ul>
	</div>
	
	</body>